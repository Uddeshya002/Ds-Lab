#include <iostream>
#include <vector>
#include <unordered_map>
using namespace std;

struct Node{
    int data;
    Node *left,*right;
    Node(int v):data(v),left(NULL),right(NULL){}
};

Node* build(vector<int>& pre,int pl,int pr,vector<int>& in,int il,int ir,unordered_map<int,int>& mp){
    if(pl>pr||il>ir) return NULL;
    Node* r=new Node(pre[pl]);
    int k=mp[pre[pl]];
    int L=k-il;
    r->left=build(pre,pl+1,pl+L,in,il,k-1,mp);
    r->right=build(pre,pl+L+1,pr,in,k+1,ir,mp);
    return r;
}

int main(){
    vector<int> pre={1,2,4,5,3};
    vector<int> in={4,2,5,1,3};
    unordered_map<int,int> mp;
    for(int i=0;i<in.size();i++) mp[in[i]]=i;
    Node* r=build(pre,0,pre.size()-1,in,0,in.size()-1,mp);
    cout<<r->data;
}
